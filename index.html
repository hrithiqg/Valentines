<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For My Annanya ❤️</title>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <style>
    :root {
      --primary: #ff4d7d;
      --secondary: #ff85a2;
      --bg: #fce4ec;
      --glass: rgba(255, 255, 255, 0.8);
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #fce4ec 0%, #ffebee 100%);
      font-family: 'Quicksand', sans-serif;
      overflow: hidden;
    }

    /* Floating Background Elements */
    .bg-heart {
      position: absolute;
      color: var(--secondary);
      opacity: 0.3;
      pointer-events: none;
      z-index: 1;
      animation: floatUp 6s linear infinite;
    }

    @keyframes floatUp {
      0% { transform: translateY(110vh) scale(0.5) rotate(0deg); opacity: 1; }
      100% { transform: translateY(-10vh) scale(1.5) rotate(360deg); opacity: 0; }
    }

    .container {
      position: relative;
      z-index: 10;
      background: var(--glass);
      backdrop-filter: blur(15px);
      padding: 3rem 2rem;
      border-radius: 40px;
      border: 2px solid white;
      box-shadow: 0 20px 50px rgba(255, 77, 125, 0.15);
      text-align: center;
      width: 90%;
      max-width: 450px;
      transition: all 0.5s ease;
    }

    /* Polaroid Effect */
    .photo-frame {
      background: white;
      padding: 10px 10px 30px 10px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
      transform: rotate(-3deg);
      margin-bottom: 2rem;
      transition: transform 0.3s;
    }
    .photo-frame:hover { transform: rotate(0deg) scale(1.05); }
    .photo-frame img { width: 100%; border-radius: 5px; }

    h1 {
      color: var(--primary);
      font-size: 1.8rem;
      margin: 1rem 0;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
    }

    .counter {
      background: #ffecf1;
      color: var(--primary);
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.85rem;
      display: inline-block;
      font-weight: bold;
      margin-bottom: 1rem;
    }

    .btn-wrapper {
      position: relative;
      height: 150px; /* Space for button to run away */
      margin-top: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    button {
      padding: 15px 35px;
      font-size: 1.1rem;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      font-weight: 700;
      transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    #yesBtn {
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      color: white;
      box-shadow: 0 5px 15px rgba(255, 77, 125, 0.4);
      z-index: 100;
    }

    #noBtn {
      background: white;
      color: #999;
      border: 1px solid #eee;
      position: absolute;
      white-space: nowrap;
    }

    .hidden { display: none !important; }

    #successMessage {
      animation: heartBeat 1.5s infinite;
    }

    @keyframes heartBeat {
      0% { transform: scale(1); }
      50% { transform: scale(1.02); }
      100% { transform: scale(1); }
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>

  <div class="container" id="mainCard">
    <div class="photo-frame">
      <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOHpueGZ3bm9qZ3p4bmZ4bmZ4bmZ4bmZ4bmZ4bmZ4bmZ4bmZ4bmZ4JmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1z/K97l9W7JmO0Z6/giphy.gif" alt="Us">
    </div>

    <div class="counter" id="nickname">Annanya</div>
    <h1 id="headline">Will you be my Valentine?</h1>
    
    <div class="btn-wrapper" id="btnGroup">
      <button id="yesBtn">YES! ❤️</button>
      <button id="noBtn">No</button>
    </div>
  </div>

  <div class="container hidden" id="successCard">
    <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOHpueGZ3bm9qZ3p4bmZ4bmZ4bmZ4bmZ4bmZ4bmZ4bmZ4bmZ4JmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1z/T86p6H9lS6X0c/giphy.gif" width="150">
    <h1 id="finalMessage">I knew it! ❤️</h1>
    <p style="color: #666;">I love you more than words can say, Muffin. See you on the 14th!</p>
  </div>

  <script>
    const noBtn = document.getElementById('noBtn');
    const yesBtn = document.getElementById('yesBtn');
    const nickname = document.getElementById('nickname');
    const mainCard = document.getElementById('mainCard');
    const successCard = document.getElementById('successCard');
    const btnGroup = document.getElementById('btnGroup');

    const names = ["Annanya", "Dudu", "Meli Kiki", "Mela Muffin"];
    const noTexts = [
      "Are you sure?", 
      "Really sure, Dudu?", 
      "Think again, Kiki!", 
      "Last chance, Muffin!", 
      "You're breaking my heart!", 
      "Annanya pls", 
      "I'm gonna cry...", 
      "Wait! Click the other one!"
    ];
    
    let nameIndex = 0;
    let noCount = 0;

    // Smoothly cycle nicknames
    setInterval(() => {
      nameIndex = (nameIndex + 1) % names.length;
      nickname.style.opacity = 0;
      setTimeout(() => {
        nickname.innerText = names[nameIndex];
        nickname.style.opacity = 1;
      }, 300);
    }, 2500);

    // Escape Logic - Optimized for better boundaries
    noBtn.addEventListener('mouseover', moveButton);
    noBtn.addEventListener('touchstart', (e) => {
      e.preventDefault();
      moveButton();
    });

    function moveButton() {
      const padding = 20;
      const bWidth = noBtn.offsetWidth;
      const bHeight = noBtn.offsetHeight;
      const gWidth = btnGroup.offsetWidth;
      const gHeight = btnGroup.offsetHeight;

      // Calculate random position within the btn-wrapper
      const newX = Math.random() * (gWidth - bWidth - padding);
      const newY = Math.random() * (gHeight - bHeight - padding);

      noBtn.style.left = `${newX}px`;
      noBtn.style.top = `${newY}px`;
      
      // Fun updates
      noBtn.innerText = noTexts[noCount % noTexts.length];
      noCount++;

      // Make "Yes" grow more aggressively
      const currentScale = yesBtn.style.transform ? parseFloat(yesBtn.style.transform.replace('scale(', '')) : 1;
      if (currentScale < 1.8) {
        yesBtn.style.transform = `scale(${currentScale + 0.1})`;
      }
    }

    yesBtn.addEventListener('click', () => {
      mainCard.classList.add('hidden');
      successCard.classList.remove('hidden');
      
      // Ultimate Confetti
      const duration = 5 * 1000;
      const animationEnd = Date.now() + duration;
      const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

      function randomInRange(min, max) { return Math.random() * (max - min) + min; }

      const interval = setInterval(function() {
        const timeLeft = animationEnd - Date.now();
        if (timeLeft <= 0) return clearInterval(interval);
        const particleCount = 50 * (timeLeft / duration);
        confetti({...defaults, particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } });
        confetti({...defaults, particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } });
      }, 250);
    });

    // Create more beautiful floating hearts
    function createHeart() {
      const heart = document.createElement('div');
      heart.classList.add('bg-heart');
      heart.innerHTML = '❤️';
      heart.style.left = Math.random() * 100 + 'vw';
      heart.style.fontSize = Math.random() * 20 + 10 + 'px';
      heart.style.animationDuration = Math.random() * 3 + 3 + 's';
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 6000);
    }
    setInterval(createHeart, 400);
  </script>
</body>
</html>
